{"version":3,"file":"index.esm.js","sources":["../src/TypeAhead/TypeAhead.tsx","../node_modules/style-inject/dist/style-inject.es.js"],"sourcesContent":["import React, { ChangeEvent, useState } from \"react\";\nimport \"./TypeAhead.scss\";\n\ninterface Suggestion {\n    title: string\n}\n\ninterface TypeAheadProps {\n    // styles applied to root element\n    className?: string;\n    // placeholder text\n    placeholder?: string;\n    // error message text\n    error?: string;\n    // suggestion \n    suggestionList: Suggestion[];\n    // on input change\n    onSearchKeyChange: (query: string) => void;\n    // on select\n    onSelect: (item: Suggestion) => void\n    // loading status\n    loading: boolean;\n}\n\nfunction TypeAhead({\n    className,\n    error,\n    placeholder = \"search...\",\n    suggestionList = [],\n    onSearchKeyChange,\n    onSelect,\n    loading = false\n}: TypeAheadProps) {\n\n    const [searchKey, setSearchKey] = useState(\"\");\n    const [selected, setSelected] = useState(false);\n    const [focusIndex, setFocusIndex] = useState(-1);\n    const [isOverlayOpen, setOverlayOpen] = useState(false);\n\n    const searchKeyHandler = (event: ChangeEvent<HTMLInputElement>) => {\n        setSearchKey(event.target.value);\n        setOverlayOpen(true);\n        onSearchKeyChange(event.target.value);\n    }\n\n    const handleSelect = (item: Suggestion) => {\n        setSearchKey(item.title);\n        setSelected(true);\n        onSelect(item);\n        setOverlayOpen(false);\n    }\n\n    const handlerClear = () => {\n        setSearchKey(\"\");\n        setSelected(false);\n        setOverlayOpen(false);\n        setFocusIndex(0);\n    }\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if(event.key === \"ArrowDown\"){\n            console.log(\"Arrow Down\");\n            setFocusIndex(prevIndex => prevIndex < suggestionList.length - 1 ? prevIndex + 1 : 0);\n        }else if(event.key === \"ArrowUp\"){\n            console.log(\"Arrow Up\");\n            setFocusIndex(prevIndex => prevIndex > 0 ? prevIndex - 1 : suggestionList.length - 1);\n        }else if(event.key === \"Enter\"){\n            console.log(\"Enter\");\n            if(focusIndex > 0 && suggestionList[focusIndex]){\n                handleSelect(suggestionList[focusIndex]);\n            }\n        }else if(event.key === \"Escape\"){\n            console.log(\"Escape\");\n            setOverlayOpen(false);\n        }\n    };\n\n    return (<div className=\"elm-type-ahead-root\">\n        <div className=\"container\">\n            <input\n                type=\"text\"\n                value={searchKey}\n                onChange={searchKeyHandler}\n                placeholder={placeholder}\n                onKeyDown={handleKeyDown}\n            />\n            {!loading && searchKey && \n                <button\n                    onClick={handlerClear}\n                    className=\"close-btn\"\n                    aria-label=\"Clear\"\n                >\n                    &#x2715;\n                </button>\n            }\n            {loading && <div className=\"loader-container\">\n                <div className=\"loader\"></div>\n            </div>}\n            {!loading && isOverlayOpen && !selected && suggestionList.length > 0 &&\n                <ul className=\"overlay\">\n                    {suggestionList\n                        ?.map((item, index) => \n                            <li \n                                key={index}\n                                onClick={()=> handleSelect(item)}\n                                onMouseEnter={() => setFocusIndex(index)}\n                                className={focusIndex === index ? \"highlight\" : \"\"}\n                                >\n                                {item.title}\n                            </li>)\n                    }\n                </ul>\n            }\n            {error && <div className=\"message\">Error Message</div>}\n        </div>\n    </div>);\n}\n\nexport default TypeAhead;","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n"],"names":["TypeAhead","className","error","placeholder","suggestionList","onSearchKeyChange","onSelect","loading","searchKey","setSearchKey","useState","selected","setSelected","focusIndex","setFocusIndex","isOverlayOpen","setOverlayOpen","handleSelect","item","title","React","createElement","type","value","onChange","event","target","onKeyDown","key","console","log","prevIndex","length","onClick","map","index","onMouseEnter","css","ref","insertAt","document","head","getElementsByTagName","style","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode"],"mappings":"oCAwBA,SAASA,GAAUC,UACfA,EAASC,MACTA,EAAKC,YACLA,EAAc,YAAWC,eACzBA,EAAiB,GAAEC,kBACnBA,EAAiBC,SACjBA,EAAQC,QACRA,GAAU,IAGV,MAAOC,EAAWC,GAAgBC,EAAS,KACpCC,EAAUC,GAAeF,GAAS,IAClCG,EAAYC,GAAiBJ,GAAU,IACvCK,EAAeC,GAAkBN,GAAS,GAQ3CO,EAAgBC,IAClBT,EAAaS,EAAKC,OAClBP,GAAY,GACZN,EAASY,GACTF,GAAe,EAAM,EA4BzB,OAAQI,EAAAC,cAAA,MAAA,CAAKpB,UAAU,uBACnBmB,EAAKC,cAAA,MAAA,CAAApB,UAAU,aACXmB,EAAAC,cAAA,QAAA,CACIC,KAAK,OACLC,MAAOf,EACPgB,SA3CcC,IACtBhB,EAAagB,EAAMC,OAAOH,OAC1BP,GAAe,GACfX,EAAkBoB,EAAMC,OAAOH,MAAM,EAyC7BpB,YAAaA,EACbwB,UAzBWF,IACF,cAAdA,EAAMG,KACLC,QAAQC,IAAI,cACZhB,GAAciB,GAAaA,EAAY3B,EAAe4B,OAAS,EAAID,EAAY,EAAI,KAChE,YAAdN,EAAMG,KACXC,QAAQC,IAAI,YACZhB,GAAciB,GAAaA,EAAY,EAAIA,EAAY,EAAI3B,EAAe4B,OAAS,KAChE,UAAdP,EAAMG,KACXC,QAAQC,IAAI,SACTjB,EAAa,GAAKT,EAAeS,IAChCI,EAAab,EAAeS,KAEb,WAAdY,EAAMG,MACXC,QAAQC,IAAI,UACZd,GAAe,GAClB,KAYKT,GAAWC,GACTY,EACIC,cAAA,SAAA,CAAAY,QApCK,KACjBxB,EAAa,IACbG,GAAY,GACZI,GAAe,GACfF,EAAc,EAAE,EAiCJb,UAAU,YACC,aAAA,SAGN,KAEZM,GAAWa,EAAAC,cAAA,MAAA,CAAKpB,UAAU,oBACvBmB,EAAAC,cAAA,MAAA,CAAKpB,UAAU,aAEjBM,GAAWQ,IAAkBJ,GAAYP,EAAe4B,OAAS,GAC/DZ,EAAAC,cAAA,KAAA,CAAIpB,UAAU,WACTG,aAAc,EAAdA,EACK8B,KAAI,CAAChB,EAAMiB,IACTf,EAAAC,cAAA,KAAA,CACIO,IAAKO,EACLF,QAAS,IAAKhB,EAAaC,GAC3BkB,aAAc,IAAMtB,EAAcqB,GAClClC,UAAWY,IAAesB,EAAQ,YAAc,IAE/CjB,EAAKC,UAKzBjB,GAASkB,uBAAKnB,UAAU,WAA6B,kBAGlE,ECpHA,SAAqBoC,EAAKC,QACX,IAARA,IAAiBA,EAAM,CAAA,GAC5B,IAAIC,EAAWD,EAAIC,SAEnB,GAAKF,GAA2B,oBAAbG,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAQH,SAASnB,cAAc,SACnCsB,EAAMrB,KAAO,WAEI,QAAbiB,GACEE,EAAKG,WACPH,EAAKI,aAAaF,EAAOF,EAAKG,YAKhCH,EAAKK,YAAYH,GAGfA,EAAMI,WACRJ,EAAMI,WAAWC,QAAUX,EAE3BM,EAAMG,YAAYN,SAASS,eAAeZ,GAnBY,CAqB1D"}