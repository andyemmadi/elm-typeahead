{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/TypeAhead/TypeAhead.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { ChangeEvent, useState } from \"react\";\nimport \"./TypeAhead.scss\";\n\ninterface Suggestion {\n    title: string\n}\n\ninterface TypeAheadProps {\n    // styles applied to root element\n    className?: string;\n    // placeholder text\n    placeholder?: string;\n    // error message text\n    error?: string;\n    // suggestion \n    suggestionList: Suggestion[];\n    // on input change\n    onSearchKeyChange: (query: string) => void;\n    // on select\n    onSelect: (item: Suggestion) => void\n    // loading status\n    loading: boolean;\n}\n\nfunction TypeAhead({\n    className,\n    error,\n    placeholder = \"search...\",\n    suggestionList = [],\n    onSearchKeyChange,\n    onSelect,\n    loading = false\n}: TypeAheadProps) {\n\n    const [searchKey, setSearchKey] = useState(\"\");\n    const [selected, setSelected] = useState(false);\n    const [focusIndex, setFocusIndex] = useState(-1);\n    const [isOverlayOpen, setOverlayOpen] = useState(false);\n\n    const searchKeyHandler = (event: ChangeEvent<HTMLInputElement>) => {\n        setSearchKey(event.target.value);\n        setOverlayOpen(true);\n        onSearchKeyChange(event.target.value);\n    }\n\n    const handleSelect = (item: Suggestion) => {\n        setSearchKey(item.title);\n        setSelected(true);\n        onSelect(item);\n        setOverlayOpen(false);\n    }\n\n    const handlerClear = () => {\n        setSearchKey(\"\");\n        setSelected(false);\n        setOverlayOpen(false);\n        setFocusIndex(0);\n    }\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if(event.key === \"ArrowDown\"){\n            console.log(\"Arrow Down\");\n            setFocusIndex(prevIndex => prevIndex < suggestionList.length - 1 ? prevIndex + 1 : 0);\n        }else if(event.key === \"ArrowUp\"){\n            console.log(\"Arrow Up\");\n            setFocusIndex(prevIndex => prevIndex > 0 ? prevIndex - 1 : suggestionList.length - 1);\n        }else if(event.key === \"Enter\"){\n            console.log(\"Enter\");\n            if(focusIndex > 0 && suggestionList[focusIndex]){\n                handleSelect(suggestionList[focusIndex]);\n            }\n        }else if(event.key === \"Escape\"){\n            console.log(\"Escape\");\n            setOverlayOpen(false);\n        }\n    };\n\n    return (<div className=\"elm-type-ahead-root\">\n        <div className=\"container\">\n            <input\n                type=\"text\"\n                value={searchKey}\n                onChange={searchKeyHandler}\n                placeholder={placeholder}\n                onKeyDown={handleKeyDown}\n            />\n            {!loading && searchKey && \n                <button\n                    onClick={handlerClear}\n                    className=\"close-btn\"\n                    aria-label=\"Clear\"\n                >\n                    &#x2715;\n                </button>\n            }\n            {loading && <div className=\"loader-container\">\n                <div className=\"loader\"></div>\n            </div>}\n            {!loading && isOverlayOpen && !selected && suggestionList.length > 0 &&\n                <ul className=\"overlay\">\n                    {suggestionList\n                        ?.map((item, index) => \n                            <li \n                                key={index}\n                                onClick={()=> handleSelect(item)}\n                                onMouseEnter={() => setFocusIndex(index)}\n                                className={focusIndex === index ? \"highlight\" : \"\"}\n                                >\n                                {item.title}\n                            </li>)\n                    }\n                </ul>\n            }\n            {error && <div className=\"message\">Error Message</div>}\n        </div>\n    </div>);\n}\n\nexport default TypeAhead;"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","className","error","placeholder","suggestionList","onSearchKeyChange","onSelect","loading","searchKey","setSearchKey","useState","selected","setSelected","focusIndex","setFocusIndex","isOverlayOpen","setOverlayOpen","handleSelect","item","title","React","value","onChange","event","target","onKeyDown","key","console","log","prevIndex","length","onClick","map","index","onMouseEnter"],"mappings":"+KAAA,SAAqBA,EAAKC,QACX,IAARA,IAAiBA,EAAM,CAAA,GAC5B,IAAIC,EAAWD,EAAIC,SAEnB,GAAKF,GAA2B,oBAAbG,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAQH,SAASI,cAAc,SACnCD,EAAME,KAAO,WAEI,QAAbN,GACEE,EAAKK,WACPL,EAAKM,aAAaJ,EAAOF,EAAKK,YAKhCL,EAAKO,YAAYL,GAGfA,EAAMM,WACRN,EAAMM,WAAWC,QAAUb,EAE3BM,EAAMK,YAAYR,SAASW,eAAed,GAnBY,CAqB1D,osCCDA,UAAmBe,UACfA,EAASC,MACTA,EAAKC,YACLA,EAAc,YAAWC,eACzBA,EAAiB,GAAEC,kBACnBA,EAAiBC,SACjBA,EAAQC,QACRA,GAAU,IAGV,MAAOC,EAAWC,GAAgBC,EAAQA,SAAC,KACpCC,EAAUC,GAAeF,EAAQA,UAAC,IAClCG,EAAYC,GAAiBJ,EAAAA,UAAU,IACvCK,EAAeC,GAAkBN,EAAQA,UAAC,GAQ3CO,EAAgBC,IAClBT,EAAaS,EAAKC,OAClBP,GAAY,GACZN,EAASY,GACTF,GAAe,EAAM,EA4BzB,OAAQI,EAAA,QAAA3B,cAAA,MAAA,CAAKQ,UAAU,uBACnBmB,EAAAA,QAAK3B,cAAA,MAAA,CAAAQ,UAAU,aACXmB,EAAAA,QAAA3B,cAAA,QAAA,CACIC,KAAK,OACL2B,MAAOb,EACPc,SA3CcC,IACtBd,EAAac,EAAMC,OAAOH,OAC1BL,GAAe,GACfX,EAAkBkB,EAAMC,OAAOH,MAAM,EAyC7BlB,YAAaA,EACbsB,UAzBWF,IACF,cAAdA,EAAMG,KACLC,QAAQC,IAAI,cACZd,GAAce,GAAaA,EAAYzB,EAAe0B,OAAS,EAAID,EAAY,EAAI,KAChE,YAAdN,EAAMG,KACXC,QAAQC,IAAI,YACZd,GAAce,GAAaA,EAAY,EAAIA,EAAY,EAAIzB,EAAe0B,OAAS,KAChE,UAAdP,EAAMG,KACXC,QAAQC,IAAI,SACTf,EAAa,GAAKT,EAAeS,IAChCI,EAAab,EAAeS,KAEb,WAAdU,EAAMG,MACXC,QAAQC,IAAI,UACZZ,GAAe,GAClB,KAYKT,GAAWC,GACTY,EAAAA,QACI3B,cAAA,SAAA,CAAAsC,QApCK,KACjBtB,EAAa,IACbG,GAAY,GACZI,GAAe,GACfF,EAAc,EAAE,EAiCJb,UAAU,YACC,aAAA,SAGN,KAEZM,GAAWa,EAAA,QAAA3B,cAAA,MAAA,CAAKQ,UAAU,oBACvBmB,EAAA,QAAA3B,cAAA,MAAA,CAAKQ,UAAU,aAEjBM,GAAWQ,IAAkBJ,GAAYP,EAAe0B,OAAS,GAC/DV,UAAA3B,cAAA,KAAA,CAAIQ,UAAU,WACTG,aAAc,EAAdA,EACK4B,KAAI,CAACd,EAAMe,IACTb,EAAA,QAAA3B,cAAA,KAAA,CACIiC,IAAKO,EACLF,QAAS,IAAKd,EAAaC,GAC3BgB,aAAc,IAAMpB,EAAcmB,GAClChC,UAAWY,IAAeoB,EAAQ,YAAc,IAE/Cf,EAAKC,UAKzBjB,GAASkB,EAAAA,6BAAKnB,UAAU,WAA6B,kBAGlE"}